<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CCTemplates</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #2563eb;
      --primary-hover: #1d4ed8;
      --secondary-color: #10b981;
      --secondary-hover: #059669;
      --background: #f8fafc;
      --surface: #ffffff;
      --text-primary: #1f2937;
      --text-secondary: #6b7280;
      --text-muted: #9ca3af;
      --border: #e5e7eb;
      --border-light: #f3f4f6;
      --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
      --radius: 8px;
      --radius-lg: 12px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--background);
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .search-container {
      margin-bottom: 2rem;
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .search-input {
      flex: 1;
      min-width: 300px;
      padding: 0.75rem 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .search-clear {
      padding: 0.75rem 1rem;
      background: var(--text-muted);
      color: white;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      font-family: 'Inter', sans-serif;
      font-size: 0.875rem;
      transition: background-color 0.2s ease;
    }

    .search-clear:hover {
      background: var(--text-secondary);
    }

    .toc-container {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: var(--shadow);
    }

    .toc-header {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      user-select: none;
    }

    .toc-toggle {
      font-size: 0.875rem;
      color: var(--text-muted);
    }

    .toc-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .toc-item {
      padding: 0.5rem 0.75rem;
      border-radius: var(--radius);
      cursor: pointer;
      transition: background-color 0.2s ease;
      font-size: 0.875rem;
      color: var(--text-secondary);
      border: 1px solid transparent;
    }

    .toc-item:hover {
      background: var(--border-light);
      color: var(--primary-color);
      border-color: var(--border);
    }

    .search-stats {
      color: var(--text-muted);
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }

    .no-results {
      text-align: center;
      color: var(--text-muted);
      padding: 3rem;
      font-size: 1.1rem;
    }

    .toc-collapsed .toc-list {
      display: none;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      text-align: center;
      margin: 0 0 3rem 0;
      color: var(--text-primary);
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .template-container {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      margin: 0 0 1.5rem 0;
      box-shadow: var(--shadow);
      transition: all 0.2s ease;
    }

    .template-container:hover {
      border-color: var(--primary-color);
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }

    .template-label {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .template-label::before {
      font-size: 1.1em;
    }

    .code-container {
      background: #f8fafc;
      border: 1px solid var(--border-light);
      border-radius: var(--radius);
      padding: 1rem;
      margin: 1rem 0;
      position: relative;
    }

    .button-group {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .copy-btn, .collapse-btn {
      font-family: 'Inter', sans-serif;
      font-size: 0.875rem;
      font-weight: 500;
      padding: 0.625rem 1.25rem;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.15s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .collapse-btn {
      background: var(--primary-color);
      color: white;
    }

    .collapse-btn:hover {
      background: var(--primary-hover);
      transform: translateY(-1px);
    }

    .copy-btn {
      background: var(--secondary-color);
      color: white;
    }

    .copy-btn:hover {
      background: var(--secondary-hover);
      transform: translateY(-1px);
    }

    .copy-btn:active, .collapse-btn:active {
      transform: translateY(0);
    }

    pre {
      margin: 0;
      white-space: pre-wrap;
      font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
      font-size: 0.875rem;
      line-height: 1.5;
      background: #1e293b;
      color: #e2e8f0;
      padding: 1.5rem;
      border-radius: var(--radius);
      overflow-x: auto;
      border: 1px solid #334155;
    }

    .collapsible.collapsed {
      display: none;
    }

    .description {
      margin-top: 1rem;
      color: var(--text-secondary);
      padding: 0.75rem 1rem;
      background: var(--border-light);
      border-radius: var(--radius);
      border-left: 4px solid var(--primary-color);
    }

    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }

      .search-container {
        flex-direction: column;
        align-items: stretch;
      }

      .search-input {
        min-width: unset;
        margin-bottom: 0.5rem;
      }

      .toc-list {
        grid-template-columns: 1fr;
      }

      h1 {
        font-size: 2rem;
        margin-bottom: 2rem;
      }

      .template-container {
        padding: 1rem;
      }

      .button-group {
        flex-direction: column;
      }

      .copy-btn, .collapse-btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CCTemplates</h1>
    
    <!-- Search Container -->
    <div class="search-container">
      <input 
        type="text" 
        id="search-input" 
        class="search-input" 
        placeholder="Search templates by title, description, or tags..."
      >
      <button id="search-clear" class="search-clear">Clear</button>
    </div>
    
    <!-- Table of Contents -->
    <div class="toc-container">
      <div class="toc-header" id="toc-header">
        Table of Contents
        <span class="toc-toggle" id="toc-toggle">(click to toggle)</span>
      </div>
      <div class="toc-list" id="toc-list">
        <!-- TOC items will be populated by JavaScript -->
      </div>
    </div>
    
    <!-- Search Stats -->
    <div class="search-stats" id="search-stats"></div>
    
    <!-- Templates Container -->
    <div id="templates-root"></div>
    
    <!-- No Results Message -->
    <div class="no-results" id="no-results" style="display: none;">
      <p>No templates found matching your search criteria.</p>
      <p>Try adjusting your search terms or <button onclick="clearSearch()" style="color: var(--primary-color); background: none; border: none; cursor: pointer; text-decoration: underline;">clear the search</button>.</p>
    </div>
  </div>
  <script>
  // Global variables
  let allTemplates = [];
  let filteredTemplates = [];
  
  // Load code templates from JSON
  fetch('templates.json')
    .then(res => res.json())
    .then(templates => {
      allTemplates = templates;
      filteredTemplates = [...templates];
      buildTOC();
      renderTemplates();
      updateSearchStats();
    });

  // Build Table of Contents
  function buildTOC() {
    const tocList = document.getElementById('toc-list');
    tocList.innerHTML = '';
    
    // Group templates by category
    const categorizedTemplates = {};
    allTemplates.forEach((tmpl, idx) => {
      const category = tmpl.category || 'Uncategorized';
      if (!categorizedTemplates[category]) {
        categorizedTemplates[category] = [];
      }
      categorizedTemplates[category].push({ template: tmpl, index: idx });
    });
    
    // Sort categories and templates within each category
    const sortedCategories = Object.keys(categorizedTemplates).sort();
    
    sortedCategories.forEach(category => {
      // Create category header
      const categoryHeader = document.createElement('div');
      categoryHeader.style.cssText = `
        font-weight: 600;
        color: var(--text-primary);
        margin: 1rem 0 0.5rem 0;
        font-size: 0.95rem;
        border-bottom: 1px solid var(--border);
        padding-bottom: 0.25rem;
      `;
      categoryHeader.textContent = category;
      tocList.appendChild(categoryHeader);
      
      // Sort templates within category by title
      const sortedTemplates = categorizedTemplates[category].sort((a, b) => 
        a.template.title.localeCompare(b.template.title)
      );
      
      // Add templates under this category
      sortedTemplates.forEach(({ template, index }) => {
        const tocItem = document.createElement('div');
        tocItem.className = 'toc-item';
        tocItem.textContent = template.title;
        tocItem.style.marginLeft = '1rem';
        tocItem.onclick = () => scrollToTemplate(index);
        tocList.appendChild(tocItem);
      });
    });
  }

  // Scroll to specific template
  function scrollToTemplate(index) {
    const templateElement = document.querySelector(`[data-template-index="${index}"]`);
    if (templateElement) {
      templateElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
      // Add a temporary highlight effect
      templateElement.style.borderColor = 'var(--primary-color)';
      templateElement.style.boxShadow = 'var(--shadow-lg)';
      setTimeout(() => {
        templateElement.style.borderColor = '';
        templateElement.style.boxShadow = '';
      }, 2000);
    }
  }

  // Search functionality
  function searchTemplates(query) {
    if (!query.trim()) {
      filteredTemplates = [...allTemplates];
    } else {
      const searchTerm = query.toLowerCase();
      filteredTemplates = allTemplates.filter(tmpl => {
        // Search in title
        if (tmpl.title.toLowerCase().includes(searchTerm)) return true;
        
        // Search in description
        if (tmpl.description && tmpl.description.toLowerCase().includes(searchTerm)) return true;
        
        // Search in tags
        if (tmpl.tags && tmpl.tags.some(tag => tag.toLowerCase().includes(searchTerm))) return true;
        
        // Search in category
        if (tmpl.category && tmpl.category.toLowerCase().includes(searchTerm)) return true;
        
        return false;
      });
    }
    
    renderTemplates();
    updateSearchStats();
  }

  // Update search statistics
  function updateSearchStats() {
    const searchStats = document.getElementById('search-stats');
    const searchInput = document.getElementById('search-input');
    const noResults = document.getElementById('no-results');
    
    if (searchInput.value.trim()) {
      searchStats.textContent = `Showing ${filteredTemplates.length} of ${allTemplates.length} templates`;
      searchStats.style.display = 'block';
    } else {
      searchStats.style.display = 'none';
    }
    
    // Show/hide no results message
    if (filteredTemplates.length === 0 && searchInput.value.trim()) {
      noResults.style.display = 'block';
    } else {
      noResults.style.display = 'none';
    }
  }

  // Clear search
  function clearSearch() {
    document.getElementById('search-input').value = '';
    searchTemplates('');
  }

  // Render templates
  function renderTemplates() {
    const root = document.getElementById('templates-root');
    root.innerHTML = '';
    
    // Group filtered templates by category
    const categorizedTemplates = {};
    filteredTemplates.forEach((tmpl, filteredIdx) => {
      const originalIdx = allTemplates.findIndex(t => t === tmpl);
      const category = tmpl.category || 'Uncategorized';
      if (!categorizedTemplates[category]) {
        categorizedTemplates[category] = [];
      }
      categorizedTemplates[category].push({ template: tmpl, originalIndex: originalIdx });
    });
    
    // Sort categories and templates within each category
    const sortedCategories = Object.keys(categorizedTemplates).sort();
    
    sortedCategories.forEach(category => {
      // Create category section header
      const categorySection = document.createElement('div');
      categorySection.style.cssText = `
        margin: 2rem 0 1.5rem 0;
        padding: 1rem 0 0.5rem 0;
        border-top: 2px solid var(--border);
      `;
      
      const categoryTitle = document.createElement('h2');
      categoryTitle.style.cssText = `
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin: 0 0 1rem 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      `;
      categoryTitle.textContent = category;
      categorySection.appendChild(categoryTitle);
      root.appendChild(categorySection);
      
      // Sort templates within category by title
      const sortedTemplates = categorizedTemplates[category].sort((a, b) => 
        a.template.title.localeCompare(b.template.title)
      );
      
      // Render templates in this category
      sortedTemplates.forEach(({ template: tmpl, originalIndex: originalIdx }) => {
        // Create template container
        const container = document.createElement('div');
        container.className = 'template-container';
        container.setAttribute('data-template-index', originalIdx);

        // Title with category and tags
        const label = document.createElement('div');
        label.className = 'template-label';
        
        let titleHTML = tmpl.title;
        label.innerHTML = titleHTML;
        container.appendChild(label);

        // Tags (if available)
        if (tmpl.tags && tmpl.tags.length > 0) {
          const tagsContainer = document.createElement('div');
          tagsContainer.style.marginBottom = '1rem';
          
          tmpl.tags.forEach(tag => {
            const tagSpan = document.createElement('span');
            tagSpan.style.cssText = `
              display: inline-block;
              background: var(--border-light);
              color: var(--text-secondary);
              padding: 0.25rem 0.5rem;
              margin: 0.25rem 0.25rem 0.25rem 0;
              border-radius: 4px;
              font-size: 0.75rem;
              border: 1px solid var(--border);
            `;
            tagSpan.textContent = tag;
            tagsContainer.appendChild(tagSpan);
          });
          
          container.appendChild(tagsContainer);
        }

        // Code block with buttons
        const codeContainer = document.createElement('div');
        codeContainer.className = 'code-container';

        // Button group
        const buttonGroup = document.createElement('div');
        buttonGroup.className = 'button-group';

        const collapseBtn = document.createElement('button');
        collapseBtn.className = 'collapse-btn';
        collapseBtn.innerHTML = 'Show Code';

        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.innerHTML = 'Copy Code';

        const codeDiv = document.createElement('div');
        codeDiv.className = 'collapsible collapsed';

        const pre = document.createElement('pre');
        const code = document.createElement('code');
        code.textContent = tmpl.code;
        pre.appendChild(code);
        codeDiv.appendChild(pre);

        collapseBtn.onclick = () => {
          codeDiv.classList.toggle('collapsed');
          collapseBtn.innerHTML = codeDiv.classList.contains('collapsed') ? 'Show Code' : 'Hide Code';
        };

        copyBtn.onclick = async () => {
          try {
            await navigator.clipboard.writeText(tmpl.code);
            const originalText = copyBtn.innerHTML;
            copyBtn.innerHTML = 'Copied!';
            setTimeout(() => {
              copyBtn.innerHTML = originalText;
            }, 500);
          } catch (err) {
            copyBtn.innerHTML = 'Failed';
            setTimeout(() => {
              copyBtn.innerHTML = 'Copy Code';
            }, 500);
          }
        };

        buttonGroup.appendChild(collapseBtn);
        buttonGroup.appendChild(copyBtn);
        codeContainer.appendChild(buttonGroup);
        codeContainer.appendChild(codeDiv);

        container.appendChild(codeContainer);

        // Description
        if (tmpl.description) {
          const desc = document.createElement('div');
          desc.className = 'description';
          desc.innerText = tmpl.description;
          container.appendChild(desc);
        }

        root.appendChild(container);
      });
    });
  }

  // Event listeners
  document.addEventListener('DOMContentLoaded', () => {
    const searchInput = document.getElementById('search-input');
    const searchClear = document.getElementById('search-clear');
    const tocHeader = document.getElementById('toc-header');
    const tocContainer = document.querySelector('.toc-container');
    
    // Search input with debouncing
    let searchTimeout;
    searchInput.addEventListener('input', (e) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        searchTemplates(e.target.value);
      }, 300);
    });
    
    // Clear button
    searchClear.addEventListener('click', clearSearch);
    
    // TOC toggle
    tocHeader.addEventListener('click', () => {
      tocContainer.classList.toggle('toc-collapsed');
      const toggle = document.getElementById('toc-toggle');
      toggle.textContent = tocContainer.classList.contains('toc-collapsed') 
        ? '(click to expand)' 
        : '(click to collapse)';
    });
  });
  </script>
</body>
</html>